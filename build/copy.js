module.exports = function (grunt) {
    return {
        app: {
            files: [
                // Top level (dist)
                ...(global.is_release ? [] : [
                    { expand: true, cwd: 'scripts', src: ['CNAME'], dest: 'dist' },
                ]),
                { expand: true, cwd: 'src/root_files/_common',  src: ['**'], dest: 'dist' },
                { expand: true, cwd: 'src/images/common/logos', src: ['**'], dest: `${global.dist}/images/common/logos/` },
                ...(grunt.option('cleanup') ? [
                    { expand: true, cwd: 'scripts', src: ['.gitlab-ci.yml'], dest: 'dist' },
                ] : []),

                // This branch
                { expand: true, cwd: 'src/download/fonts', src: ['binary_symbols.woff'], dest: `${global.dist}/download/fonts/` },

                { expand: true, src: ['favicon.ico'], dest: global.dist },

                // Serve pushwoosh SDKs
                { expand: true, cwd: 'src/javascript/_common/lib/pushwooshSDK/', src: ['**'], dest: global.dist },
                { expand: true, cwd: 'src/root_files/app', src: ['**', '!index.html'], dest: 'dist' }, // top level
                { expand: true, cwd: 'src/root_files/app', src: ['index.html', 'localstorage-sync.html'], dest: global.dist },
                // app, static
                { expand: true, cwd: 'src/download/',                  src: ['**'],                  dest: `${global.dist}/download/` },
                { expand: true, cwd: 'src/images/',                    src: ['**', '!common/logos'], dest: `${global.dist}/images/` },
                { expand: true, cwd: 'src/javascript/_autogenerated/', src: ['*.js'],                dest: `${global.dist}/js/texts/` },
                { expand: true, cwd: 'src/javascript/',                src: ['manifest.json'],       dest: global.dist },
                // binary-style
                { expand: true, cwd: `${global.node_modules_paths.binary_style}/src/images/favicons`, src: ['**'], dest: `${global.dist}/images/favicons/` },
                { expand: true, cwd: `${global.node_modules_paths.binary_style}/src/images/logo`,     src: ['**'], dest: `${global.dist}/images/logo/` },
            ],
        }
    }
};
